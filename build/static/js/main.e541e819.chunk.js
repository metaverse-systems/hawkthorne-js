(this["webpackJsonphawkthorne-js"]=this["webpackJsonphawkthorne-js"]||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var i=n(5),a=n.n(i),o=n(9),r=n.n(o),c=(n(15),n(1)),s=n(10),h=n(4),d=n(3),p=(n(16),n(2)),u=n(7),f=function t(e,n,i,a){var o=this;Object(c.a)(this,t),this.draw=function(t,e,n,i,a){o.context.drawImage(o.sheet,t*o.spriteWidth+1,e*o.spriteHeight+1,o.spriteWidth-2,o.spriteHeight-1,n,i,o.spriteWidth*a,o.spriteHeight*a)},this.sheet=new Image,this.sheet.src=n,this.spriteWidth=i,this.spriteHeight=a,this.context=e.getContext("2d")},l=function t(e,n,i,a,o){var r=this;Object(c.a)(this,t),this.animate=function(t,e,n,i,a){var o=!1;if(r.animation!==t&&(r.animation=t,o=!0),r.direction!==e&&(r.direction=e,o=!0),o){r.frame=0,r.loop=[];var c=r.characterMap[t],s=[];Array.isArray(c)?(r.repeat=c[0],s=c[1]):(r.repeat=c[e][0],s=c[e][1]),s.forEach((function(t){var e=t.split(","),n=Object(u.a)(e,2),i=n[0],a=n[1];if(-1!==i.search("-"))for(var o=i.split("-"),c=Object(u.a)(o,2),s=c[0],h=c[1],d=s;d<=h;d++)r.loop.push({x:d-1,y:a-1});else r.loop.push({x:i-1,y:a-1})}))}r.draw(n,i,a)},this.draw=function(t,e,n){0!==r.loop.length&&(r.sheet.draw(r.loop[r.frame].x,r.loop[r.frame].y,t,e,n),r.frame++,r.frame===r.loop.length&&(r.frame=0))},this.sheet=new f(e,n,i,a),this.frame=0,this.animation="",this.direction="",this.repeat="",this.loop=[],this.characterMap=o},m=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).sprite=new l(t.canvas,t.url,t.width,t.height,t.characterMap),i.Type="SpriteComponent",i}return n}(p.Component),g=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).x=t.x,i.y=t.y,i.Type="PositionComponent",i}return n}(p.Component),w=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(c.a)(this,n),void 0===t&&(t={}),(i=e.call(this,t)).ConfigUpdate=function(t){Object.keys(t).forEach((function(e){i.config[e]=t[e]}))},i.Update=function(){void 0!==i.config.board&&(i.config.board.getContext("2d").clearRect(0,0,i.config.board.width,i.config.board.height),Object.keys(i.Container.Components.SpriteComponent).forEach((function(t){var e=i.Container.Components.SpriteComponent[t],n=i.Container.Components.PositionComponent[t];e.sprite&&e.sprite.animate(e.animation,e.direction,n.x,n.y,2)})))},i.Handle="DrawingSystem",i}return n}(p.System),b=n(0),j=new p.Manager,v=["abed","britta","chang","duncan","garrett","guzman","leonard","rich","troy","vicedean","annie","buddy","dean","fatneil","gilbert","jeff","pierce","shirley","vaughn","vicki"],C=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.handleResize(),fetch("https://raw.githubusercontent.com/hawkthorne/hawkthorne-journey/master/src/character_map.json").then((function(t){return t.json()})).then((function(t){i.setState({characterMap:t},(function(){i.initialize()}))})),v.forEach((function(t){fetch("https://raw.githubusercontent.com/hawkthorne/hawkthorne-journey/master/src/characters/"+t+".json").then((function(t){return t.json()})).then((function(e){var n=Object.assign({},i.state.characters);n[t]=e,i.setState({characters:n})}))}))},i.handleResize=function(){var t=window.innerWidth,e=window.innerHeight;null!==i.state.drawingSystem&&i.state.drawingSystem.ConfigUpdate({height:e,width:t,board:document.getElementById("board")})},i.initialize=function(){var t=document.getElementById("board"),e=0,n=50;v.forEach((function(a){var o="https://raw.githubusercontent.com/hawkthorne/hawkthorne-journey/master/src/images/characters/"+a+"/base.png",r=i.world.Entity();r.Component(new g({x:e,y:n})),r.Component(new m({canvas:t,url:o,width:48,height:48,characterMap:i.state.characterMap,animation:i.state.animation,direction:i.state.direction})),(e+=100)>900&&(e=0,n+=100)})),console.log(i.world.Export()),i.world.Start(250)},i.changeAnimation=function(t){i.setState({animation:t.target.value},(function(){i.updateSpriteComponent()}))},i.changeDirection=function(t){i.setState({direction:t.target.value},(function(){i.updateSpriteComponent()}))},i.updateSpriteComponent=function(){Object.keys(i.world.Components.SpriteComponent).forEach((function(t){i.world.Components.SpriteComponent[t].animation=i.state.animation,i.world.Components.SpriteComponent[t].direction=i.state.direction}))},i.state={animation:"walk",direction:"right",characterMap:{},characters:{},drawingSystem:new w({width:window.innerWidth,height:window.innerHeight})},i.world=j.Container(),i.world.System(i.state.drawingSystem),i}return Object(s.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("select",{defaultValue:this.state.animation,onChange:this.changeAnimation,children:Object.keys(this.state.characterMap).map((function(t,e){return Object(b.jsx)("option",{children:t},e)}))}),Object(b.jsxs)("select",{defaultValue:this.state.direction,onChange:this.changeDirection,children:[Object(b.jsx)("option",{value:"left",children:"Left"}),Object(b.jsx)("option",{value:"right",children:"Right"})]}),Object(b.jsx)("canvas",{id:"board",width:"1280",height:"720"})]})}}]),n}(i.Component),y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),i(t),a(t),o(t),r(t)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(C,{})}),document.getElementById("root")),y()}},[[23,1,2]]]);
//# sourceMappingURL=main.e541e819.chunk.js.map